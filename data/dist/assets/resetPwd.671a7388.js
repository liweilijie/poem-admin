import{d as e}from"./index.5d61a7e0.js";const o=Vue.createTextVNode("保存"),r=Vue.createTextVNode("关闭"),u={setup(u){const{proxy:a}=Vue.getCurrentInstance(),d=Vuex.useStore(),t=Vue.reactive({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),l=Vue.ref({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(e,o,r)=>{t.newPassword!==o?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}]});function s(){a.$refs.pwdRef.validate((o=>{o&&e(t.oldPassword,t.newPassword).then((e=>{a.$modal.msgSuccess("修改成功,请重新登录，1秒钟后将自动退出并转入登录界面"),setTimeout((()=>{d.dispatch("LogOut").then((()=>{location.href=""}))}),1e3)}))}))}function n(){a.$tab.closePage()}return(e,u)=>{const a=Vue.resolveComponent("el-input"),d=Vue.resolveComponent("el-form-item"),V=Vue.resolveComponent("el-button"),w=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock(w,{ref:"pwdRef",model:Vue.unref(t),rules:l.value,"label-width":"80px"},{default:Vue.withCtx((()=>[Vue.createVNode(d,{label:"旧密码",prop:"oldPassword"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(t).oldPassword,"onUpdate:modelValue":u[0]||(u[0]=e=>Vue.unref(t).oldPassword=e),placeholder:"请输入旧密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),Vue.createVNode(d,{label:"新密码",prop:"newPassword"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(t).newPassword,"onUpdate:modelValue":u[1]||(u[1]=e=>Vue.unref(t).newPassword=e),placeholder:"请输入新密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),Vue.createVNode(d,{label:"确认密码",prop:"confirmPassword"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(t).confirmPassword,"onUpdate:modelValue":u[2]||(u[2]=e=>Vue.unref(t).confirmPassword=e),placeholder:"请确认密码",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),Vue.createVNode(d,null,{default:Vue.withCtx((()=>[Vue.createVNode(V,{type:"primary",onClick:s},{default:Vue.withCtx((()=>[o])),_:1}),Vue.createVNode(V,{type:"danger",onClick:n},{default:Vue.withCtx((()=>[r])),_:1})])),_:1})])),_:1},8,["model","rules"])}}};export{u as default};
