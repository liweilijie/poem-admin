import{l as e,g as t,u as o,a as u,d as l}from"./post.61ad41f6.js";import"./index.5d61a7e0.js";const a={class:"app-container"},r=Vue.createTextVNode("搜索"),V=Vue.createTextVNode("重置"),n=Vue.createTextVNode("新增"),s=Vue.createTextVNode("修改"),d=Vue.createTextVNode("删除"),i=Vue.createTextVNode("导出"),c=Vue.createTextVNode("修改"),p=Vue.createTextVNode("删除"),m={class:"dialog-footer"},f=Vue.createTextVNode("确 定"),v=Vue.createTextVNode("取 消"),_=Vue.defineComponent({name:"Post"}),h=Object.assign(_,{setup(_){const{proxy:h}=Vue.getCurrentInstance(),{sys_normal_disable:w}=h.useDict("sys_normal_disable"),C=Vue.ref([]),x=Vue.ref(!1),g=Vue.ref(!0),N=Vue.ref(!0),y=Vue.ref([]),b=Vue.ref([]),k=Vue.ref(!0),B=Vue.ref(!0),D=Vue.ref(0),T=Vue.ref(""),S=Vue.reactive({form:{},queryParams:{page_num:1,page_size:10,post_code:void 0,post_name:void 0,status:void 0},rules:{post_name:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],post_code:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],post_sort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}),{queryParams:U,form:q,rules:E}=Vue.toRefs(S);async function R(){g.value=!0;const t=await e(U.value);C.value=t.list,D.value=t.total,g.value=!1}function K(){x.value=!1,P()}function P(){q.value={post_id:void 0,post_code:void 0,post_name:void 0,post_sort:0,status:"1",remark:void 0},h.resetForm("postRef")}const $=async()=>{h.resetForm("queryRef"),U.value.page_num=1,await R()};function F(e){y.value=e.map((e=>e.post_id)),b.value=e.map((e=>e.post_name)),k.value=1!=e.length,B.value=!e.length}function j(){P(),x.value=!0,T.value="添加岗位"}async function z(e){P();const o=e.post_id||y.value[0],u=await t({post_id:o});q.value=u,x.value=!0,T.value="修改岗位"}function L(){h.$refs.postRef.validate((e=>{e&&(null!=q.value.post_id?o(q.value).then((e=>{h.$modal.msgSuccess("修改成功"),x.value=!1,R()})):u(q.value).then((e=>{h.$modal.msgSuccess("新增成功"),x.value=!1,R()})))}))}function I(e){const t=e.post_id?[e.post_id]:y.value,o=e.post_id?e.post_name:b.value;h.$modal.confirm('是否确认删除岗位编号为"'+o+'"的数据项？').then((function(){return l({post_ids:t})})).then((()=>{R(),h.$modal.msgSuccess("删除成功")})).catch((()=>{}))}function O(){h.download("system/post/export",{...U.value},`post_${(new Date).getTime()}.xlsx`)}return R(),(e,t)=>{const o=Vue.resolveComponent("el-input"),u=Vue.resolveComponent("el-form-item"),l=Vue.resolveComponent("el-option"),_=Vue.resolveComponent("el-select"),h=Vue.resolveComponent("el-button"),y=Vue.resolveComponent("el-form"),b=Vue.resolveComponent("el-col"),S=Vue.resolveComponent("right-toolbar"),P=Vue.resolveComponent("el-row"),Q=Vue.resolveComponent("el-table-column"),A=Vue.resolveComponent("dict-tag"),G=Vue.resolveComponent("el-table"),H=Vue.resolveComponent("pagination"),J=Vue.resolveComponent("el-input-number"),M=Vue.resolveComponent("el-radio"),W=Vue.resolveComponent("el-radio-group"),X=Vue.resolveComponent("el-dialog"),Y=Vue.resolveDirective("hasPermi"),Z=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock("div",a,[Vue.withDirectives(Vue.createVNode(y,{model:Vue.unref(U),ref:"queryRef",inline:!0,"label-width":"68px"},{default:Vue.withCtx((()=>[Vue.createVNode(u,{label:"岗位编码",prop:"post_code"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:Vue.unref(U).post_code,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(U).post_code=e),placeholder:"请输入岗位编码",clearable:"",onKeyup:Vue.withKeys(R,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(u,{label:"岗位名称",prop:"post_name"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:Vue.unref(U).post_name,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(U).post_name=e),placeholder:"请输入岗位名称",clearable:"",onKeyup:Vue.withKeys(R,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(u,{label:"状态",prop:"status"},{default:Vue.withCtx((()=>[Vue.createVNode(_,{modelValue:Vue.unref(U).status,"onUpdate:modelValue":t[2]||(t[2]=e=>Vue.unref(U).status=e),placeholder:"岗位状态",clearable:""},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(w),(e=>(Vue.openBlock(),Vue.createBlock(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),Vue.createVNode(u,null,{default:Vue.withCtx((()=>[Vue.createVNode(h,{type:"primary",icon:"Search",onClick:R},{default:Vue.withCtx((()=>[r])),_:1}),Vue.createVNode(h,{icon:"Refresh",onClick:$},{default:Vue.withCtx((()=>[V])),_:1})])),_:1})])),_:1},8,["model"]),[[Vue.vShow,N.value]]),Vue.createVNode(P,{gutter:10,class:"mb8",style:{height:"35px"}},{default:Vue.withCtx((()=>[Vue.createVNode(b,{span:1.5},{default:Vue.withCtx((()=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:Vue.withCtx((()=>[n])),_:1})),[[Y,["system/post/add"]]])])),_:1},8,["span"]),Vue.createVNode(b,{span:1.5},{default:Vue.withCtx((()=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"success",plain:"",icon:"Edit",disabled:k.value,onClick:z},{default:Vue.withCtx((()=>[s])),_:1},8,["disabled"])),[[Y,["system/post/edit"]]])])),_:1},8,["span"]),Vue.createVNode(b,{span:1.5},{default:Vue.withCtx((()=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"danger",plain:"",icon:"Delete",disabled:B.value,onClick:I},{default:Vue.withCtx((()=>[d])),_:1},8,["disabled"])),[[Y,["system/post/delete"]]])])),_:1},8,["span"]),Vue.createVNode(b,{span:1.5},{default:Vue.withCtx((()=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"warning",plain:"",icon:"Download",onClick:O},{default:Vue.withCtx((()=>[i])),_:1})),[[Y,["system/post/export"]]])])),_:1},8,["span"]),Vue.createVNode(S,{showSearch:N.value,"onUpdate:showSearch":t[3]||(t[3]=e=>N.value=e),onQueryTable:R},null,8,["showSearch"])])),_:1}),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(G,{data:C.value,onSelectionChange:F},{default:Vue.withCtx((()=>[Vue.createVNode(Q,{type:"selection",width:"55",align:"center"}),Vue.createVNode(Q,{label:"岗位编号",align:"center",width:"100","show-overflow-tooltip":"",prop:"post_id"}),Vue.createVNode(Q,{label:"岗位编码",align:"center",prop:"post_code"}),Vue.createVNode(Q,{label:"岗位名称",align:"center",prop:"post_name"}),Vue.createVNode(Q,{label:"岗位排序",align:"center",prop:"post_sort"}),Vue.createVNode(Q,{label:"状态",align:"center",prop:"status"},{default:Vue.withCtx((e=>[Vue.createVNode(A,{options:Vue.unref(w),value:e.row.status},null,8,["options","value"])])),_:1}),Vue.createVNode(Q,{label:"创建时间",align:"center",prop:"created_at",width:"180"},{default:Vue.withCtx((t=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.parseTime(t.row.created_at)),1)])),_:1}),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(Q,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:Vue.withCtx((e=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"text",icon:"Edit",onClick:t=>z(e.row)},{default:Vue.withCtx((()=>[c])),_:2},1032,["onClick"])),[[Y,["system/post/edit"]]]),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(h,{type:"text",icon:"Delete",onClick:t=>I(e.row)},{default:Vue.withCtx((()=>[p])),_:2},1032,["onClick"])),[[Y,["system/post/delete"]]])])),_:1})),[[Y,["system/post/delete","system/post/edit"]]])])),_:1},8,["data"])),[[Z,g.value]]),Vue.withDirectives(Vue.createVNode(H,{total:D.value,page:Vue.unref(U).page_num,"onUpdate:page":t[4]||(t[4]=e=>Vue.unref(U).page_num=e),limit:Vue.unref(U).page_size,"onUpdate:limit":t[5]||(t[5]=e=>Vue.unref(U).page_size=e),onPagination:R},null,8,["total","page","limit"]),[[Vue.vShow,D.value>0]]),Vue.createVNode(X,{title:T.value,modelValue:x.value,"onUpdate:modelValue":t[11]||(t[11]=e=>x.value=e),width:"500px","append-to-body":""},{footer:Vue.withCtx((()=>[Vue.createElementVNode("div",m,[Vue.createVNode(h,{type:"primary",onClick:L},{default:Vue.withCtx((()=>[f])),_:1}),Vue.createVNode(h,{onClick:K},{default:Vue.withCtx((()=>[v])),_:1})])])),default:Vue.withCtx((()=>[Vue.createVNode(y,{ref:"postRef",model:Vue.unref(q),rules:Vue.unref(E),"label-width":"80px"},{default:Vue.withCtx((()=>[Vue.createVNode(u,{label:"岗位名称",prop:"post_name"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:Vue.unref(q).post_name,"onUpdate:modelValue":t[6]||(t[6]=e=>Vue.unref(q).post_name=e),placeholder:"请输入岗位名称"},null,8,["modelValue"])])),_:1}),Vue.createVNode(u,{label:"岗位编码",prop:"post_code"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:Vue.unref(q).post_code,"onUpdate:modelValue":t[7]||(t[7]=e=>Vue.unref(q).post_code=e),placeholder:"请输入编码名称"},null,8,["modelValue"])])),_:1}),Vue.createVNode(u,{label:"岗位顺序",prop:"post_sort"},{default:Vue.withCtx((()=>[Vue.createVNode(J,{modelValue:Vue.unref(q).post_sort,"onUpdate:modelValue":t[8]||(t[8]=e=>Vue.unref(q).post_sort=e),"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),Vue.createVNode(u,{label:"岗位状态",prop:"status"},{default:Vue.withCtx((()=>[Vue.createVNode(W,{modelValue:Vue.unref(q).status,"onUpdate:modelValue":t[9]||(t[9]=e=>Vue.unref(q).status=e)},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(w),(e=>(Vue.openBlock(),Vue.createBlock(M,{key:e.value,label:e.value},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),Vue.createVNode(u,{label:"备注",prop:"remark"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:Vue.unref(q).remark,"onUpdate:modelValue":t[10]||(t[10]=e=>Vue.unref(q).remark=e),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}});export{h as default};
